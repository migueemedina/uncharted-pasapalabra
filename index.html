<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Uncharted: Edición Experto</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS RESPONSIVE (Mismos de la versión estable) --- */
        :root {
            --bg-color: #2c241b;
            --text-color: #dcd0c0;
            --accent-gold: #eebb55;
            --accent-red: #d32f2f;
            --accent-green: #2e7d32;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            background-image: repeating-linear-gradient(45deg, #3e3226 0px, #3e3226 2px, #2c241b 2px, #2c241b 10px);
            color: var(--text-color);
            font-family: 'Special Elite', cursive;
            margin: 0;
            height: 100vh;
            height: 100dvh; 
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #game-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 600px;
            max-height: 800px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .game-title {
            position: absolute;
            top: 5%;
            width: 100%;
            text-align: center;
            font-family: 'Cinzel', serif;
            font-size: clamp(20px, 6vw, 36px);
            color: var(--accent-gold);
            text-shadow: 2px 2px 0px #000;
            z-index: 1;
            pointer-events: none;
        }

        #letters-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none; 
        }

        .letter-node {
            position: absolute;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: var(--accent-gold);
            border: 2px solid #5c4033;
            color: #3e2723;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
            font-family: 'Cinzel', serif;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
            top: 50%; 
            left: 50%;
            margin-top: -19px;
            margin-left: -19px;
        }

        .letter-node.active {
            background: var(--accent-red);
            color: white;
            border-color: white;
            transform: scale(1.4) !important; 
            z-index: 10;
        }
        
        .letter-node.correct { background: var(--accent-green); color: white; }
        .letter-node.wrong { background: #5d4037; color: #ffab91; opacity: 0.6; }

        #ui-layer {
            z-index: 5;
            width: 85%;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: rgba(44, 36, 27, 0.85); 
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #5c4033;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }

        #timer-ring {
            font-family: 'Cinzel', serif;
            font-size: 40px;
            color: #ffca28;
            text-shadow: 2px 2px 4px #000;
            margin: 0;
            line-height: 1;
        }

        .question-box {
            background: #f5e6ca;
            border: 2px dashed #5c4033;
            border-radius: 4px;
            padding: 15px;
            min-height: 110px;
            color: #3e2723;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .hint-label {
            font-size: 14px;
            color: #bf360c;
            font-weight: bold;
            font-family: 'Cinzel', serif;
            border-bottom: 2px solid #5c4033;
            display: inline-block;
            margin: 0 auto 5px auto;
        }

        .definition-text {
            font-size: clamp(14px, 4.5vw, 17px);
            line-height: 1.4;
            font-weight: bold;
            font-style: italic;
        }

        .input-area {
            display: flex;
            gap: 5px;
            height: 45px;
        }

        input {
            flex: 1;
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--accent-gold);
            border-radius: 4px;
            color: var(--accent-gold);
            font-size: 18px;
            padding: 0 10px;
            font-family: 'Special Elite', serif;
            text-align: center;
            outline: none;
        }
        input::placeholder { color: #887766; }
        input:focus { border-color: #fff; background: rgba(0,0,0,0.6); }

        button {
            border: none;
            padding: 0 20px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            border-radius: 4px;
            font-size: 14px;
        }

        .btn-ok { background: var(--accent-gold); color: #3e2723; }
        .btn-pass { 
            background: transparent; color: #aaa; border: 1px solid #666; 
            width: 100%; padding: 12px; margin-top: 5px;
        }

        #end-screen {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(30, 20, 10, 0.98);
            z-index: 100;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        #end-screen h1 { font-family: 'Cinzel'; color: var(--accent-gold); font-size: 40px;}
        .restart-btn { margin-top: 30px; background: var(--accent-red); color: white; padding: 15px 30px; }

        @media (max-height: 500px) {
            .game-title { display: none; }
            #ui-layer { width: 70%; gap: 5px; padding: 10px; }
            .question-box { min-height: 60px; }
            #timer-ring { font-size: 25px; }
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <div class="game-title">Uncharted: Pasapalabra</div>
        <div id="letters-layer"></div>
        <div id="ui-layer">
            <div id="timer-ring">240</div>
            <div class="question-box">
                <div id="clue-type" class="hint-label">CARGANDO...</div>
                <div id="definition" class="definition-text">Inicializando sistema...</div>
            </div>
            <div class="input-area">
                <input type="text" id="user-input" placeholder="Respuesta" autocomplete="off">
                <button class="btn-ok" onclick="verifyAnswer()">→</button>
            </div>
            <div>
                <button class="btn-pass" onclick="passTurn()">SALTAR</button>
            </div>
        </div>
    </div>

    <div id="end-screen">
        <h1 id="end-title">FIN</h1>
        <div id="end-score" style="color:#dcd0c0; font-size:20px;"></div>
        <button class="restart-btn" onclick="location.reload()">NUEVA BÚSQUEDA</button>
    </div>

    <script>
        // --- DICCIONARIO EXPERTO (LORE PROFUNDO) ---
        const data = [
            { id: "a", letter: "A", answer: "Avery", type: 0, question: "Capitán pirata que perpetró el atraco del Gunsway y fundó una colonia utópica." },
            { id: "b", letter: "B", answer: "Borneo", type: 0, question: "Isla de Indonesia donde Lazarevic estableció su campamento buscando la Piedra Cintamani." },
            { id: "c", letter: "C", answer: "Chloe", type: 0, question: "Cazatesoros de ascendencia india que traiciona (y luego ayuda) a Drake en Nepal." },
            { id: "d", letter: "D", answer: "Drake", type: 0, question: "Apellido falso que Nathan adoptó en el orfanato St. Francis tras huir de la policía." },
            { id: "e", letter: "E", answer: "Elena", type: 0, question: "Presentadora de TV que costeó la expedición para recuperar el ataúd de Francis Drake." },
            { id: "f", letter: "F", answer: "Francis", type: 0, question: "Sir ______ Drake. Navegante que supuestamente murió de disentería en Panamá." },
            { id: "g", letter: "G", answer: "Granada", type: 0, question: "Arma explosiva MK-NDI que Drake suele encontrar colgada en los cinturones enemigos." },
            { id: "h", letter: "H", answer: "Harry", type: 0, question: "Nombre de pila del socio que engañó a Nathan para robar la lámpara en el museo de Estambul." },
            { id: "i", letter: "I", answer: "Iram", type: 0, question: "Ciudad legendaria oculta en el desierto de Rub' al Khali, maldita por los genios." },
            { id: "j", letter: "J", answer: "Journal", type: 0, question: "Nombre en inglés de la libreta llena de bocetos y pistas que Nathan lleva en el bolsillo." },
            { id: "k", letter: "K", answer: "Karl", type: 0, question: "Apellido del explorador alemán de la SS que mató a sus propios hombres para proteger Shambhala." },
            { id: "l", letter: "L", answer: "Libertalia", type: 0, question: "Colonia comercial perdida fundada por doce capitanes piratas y sus tripulaciones." },
            { id: "m", letter: "M", answer: "Marco", type: 0, question: "Explorador veneciano cuya flota perdida en 1292 transportaba la Piedra Cintamani." },
            { id: "n", letter: "N", answer: "Nadine", type: 0, question: "Ex-líder de Shoreline que perdió su empresa tras pelear contra los hermanos Drake." },
            { id: "ñ", letter: "Ñ", answer: "Compañero", type: 1, question: "CONTIENE LA Ñ: Palabra que Sully usa constantemente para referirse a Nathan con afecto." },
            { id: "o", letter: "O", answer: "Oro", type: 0, question: "El Dorado no era una ciudad, era una estatua gigante de este material." },
            { id: "p", letter: "P", answer: "Panama", type: 0, question: "País donde Nathan, Sam y Rafe sobornaron al alcaide Vargas para investigar una celda." },
            { id: "q", letter: "Q", answer: "Arqueologo", type: 1, question: "CONTIENE LA Q: Profesión que Harry Flynn desprecia, llamando a Drake 'ladrón de poca monta'." },
            { id: "r", letter: "R", answer: "Rafe", type: 0, question: "Socio millonario que pasó 15 años buscando el tesoro de Avery por su cuenta." },
            { id: "s", letter: "S", answer: "Sully", type: 0, question: "Mentor que sacó a un joven Nathan de las calles de Cartagena, Colombia." },
            { id: "t", letter: "T", answer: "Tenzin", type: 0, question: "Líder de una aldea tibetana que rescata a Nathan tras el accidente de tren." },
            { id: "u", letter: "U", answer: "U3", type: 0, question: "Abreviatura común entre fans para referirse a 'La Traición de Drake' (Juego)." },
            { id: "v", letter: "V", answer: "Vacio", type: 1, question: "CONTIENE LA V: Según Marlowe, esto es lo que Nathan tiene en su corazón y trata de llenar." },
            { id: "w", letter: "W", answer: "Wyrm", type: 1, question: "CONTIENE LA W: (Ref. Easter Egg) Apodo para los dragones, similar a lo que Drake busca en cuevas." },
            { id: "x", letter: "X", answer: "Extincion", type: 1, question: "CONTIENE LA X: Destino que sufrieron los habitantes de Shambhala y Ubar por su ambición." },
            { id: "y", letter: "Y", answer: "Yemen", type: 0, question: "País donde Nathan es drogado y obligado a recitar las coordenadas de las estrellas." },
            { id: "z", letter: "Z", answer: "Zoran", type: 0, question: "Criminal de guerra serbio con media cara quemada que busca la inmortalidad." },
        ];

        let currentIndex = 0;
        let timeLeft = 240; // Más tiempo para leer descripciones largas
        let interval;
        let roscoDOM = [];
        let gameActive = true;

        function updateLayout() {
            const lettersLayer = document.getElementById('letters-layer');
            const minDim = Math.min(window.innerWidth, window.innerHeight);
            const radius = minDim * 0.40; 
            const total = data.length;

            roscoDOM.forEach((div, i) => {
                let angle = (360 / total) * i - 90;
                let rad = angle * (Math.PI / 180);
                let x = Math.cos(rad) * radius;
                let y = Math.sin(rad) * radius;
                div.style.transform = `translate(${x}px, ${y}px)`;
                if(div.classList.contains('active')) {
                     div.style.transform += " scale(1.4)";
                }
            });
        }

        function createLetters() {
            const layer = document.getElementById('letters-layer');
            layer.innerHTML = ''; 
            roscoDOM = [];
            data.forEach((item) => {
                let div = document.createElement('div');
                div.className = 'letter-node';
                div.innerText = item.letter;
                layer.appendChild(div);
                roscoDOM.push(div);
                item.status = 'pending';
            });
            updateLayout();
        }

        function startTimer() {
            interval = setInterval(() => {
                if(!gameActive) return;
                timeLeft--;
                document.getElementById('timer-ring').innerText = timeLeft;
                if(timeLeft <= 0) finishGame();
            }, 1000);
        }

        function updateUI() {
            if(!gameActive) return;
            let found = false;
            let checks = 0;
            while(checks < data.length) {
                if(data[currentIndex].status === 'pending') {
                    found = true;
                    break;
                }
                currentIndex++;
                if(currentIndex >= data.length) currentIndex = 0;
                checks++;
            }
            if (!found) { finishGame(); return; }

            roscoDOM.forEach(l => l.classList.remove('active'));
            roscoDOM[currentIndex].classList.add('active');
            updateLayout();

            const current = data[currentIndex];
            document.getElementById('clue-type').innerText = current.type === 0 
                ? `EMPIEZA POR ${current.letter}` 
                : `CONTIENE LA ${current.letter}`;
            document.getElementById('definition').innerText = current.question;
            document.getElementById('user-input').value = '';
        }

        function verifyAnswer() {
            if(!gameActive) return;
            let input = document.getElementById('user-input').value.trim().toLowerCase();
            let correct = data[currentIndex].answer.toLowerCase();
            input = input.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            correct = correct.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            if(input === correct) {
                data[currentIndex].status = 'correct';
                roscoDOM[currentIndex].classList.add('correct');
            } else {
                data[currentIndex].status = 'wrong';
                roscoDOM[currentIndex].classList.add('wrong');
            }
            currentIndex++;
            if(currentIndex >= data.length) currentIndex = 0;
            updateUI();
        }

        function passTurn() {
            if(!gameActive) return;
            currentIndex++;
            if(currentIndex >= data.length) currentIndex = 0;
            updateUI();
        }

        function finishGame() {
            gameActive = false;
            clearInterval(interval);
            const correctCount = data.filter(d => d.status === 'correct').length;
            document.getElementById('end-screen').style.display = 'flex';
            let title = "FIN DEL JUEGO";
            if(correctCount === data.length) title = "¡SIC PARVIS MAGNA!";
            document.getElementById('end-title').innerText = title;
            document.getElementById('end-score').innerText = `Tesoros: ${correctCount} de ${data.length}`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            window.addEventListener('resize', updateLayout);
            document.getElementById('user-input').addEventListener('keydown', (e) => {
                if(e.key === 'Enter') verifyAnswer();
            });
            createLetters();
            startTimer();
            updateUI();
        });
    </script>
</body>

</html>
